# Milestone 1

Here is everything that was achieved in Milestone 1 (plutus implementation in Rust).

To follow along, clone the repository.
```shell
git clone https://github.com/carloskiki/pallas-extras.git
```

The implementation is available under the `plutus/` directory,
```shell
cd pallas-extras/plutus
```

The tag `M1` points to the commit that marks the end of Milestone 1.
```shell
git checkout tags/M1
```

From here, all proofs of achievement can be generated, but can also be found online.
To generate the artifacts locally, a rust toolchain is required.

## Docs

The for this crate is available as a [github page](https://carloskiki.github.io/pallas-extras/plutus/index.html),
and can also be generated locally with
```shell
cargo doc --open
```

The internals are also documented. I can be found by building the documentation with the `--document-private-items` flag.
```shell
cargo doc --document-private-items --open
```

## Tests

The tests can be run with
```shell
cargo test
```

Note that some of the `conformance` tests are ignored (94 of them) because they require the `Value` type.
This type is not yet documented by the `IntersectMBO/plutus` implementation, and is subject to change.
Similarly, the functionality for constant scrutinees for `case` terms is implemented as a best effort, as
the semantics of this feature are not defined in the specification.

A coverage report is available on [codecov.io](https://app.codecov.io/gh/carloskiki/pallas-extras/tree/main/plutus).
Note that the overall coverage percentage covers the full workspace, which is out of scope for this milestone.
As can be seen by following the link, the coverage for the `plutus` crate is above 90%, which surpasses the 80% goal.

Coverage can also be generated locally with
```shell
cargo llvm-cov --open
```
Note that this generates a report including dependents of the `plutus` crate in the workspace. Only the lower
section of the report covers the `plutus` crate (rows prefixed with `plutus/`).

### Fuzzing

A fuzzing target is available. To run it, `cargo-afl` is required.

First, go into the fuzz target directory and build it.
```shell
cd fuzz && cargo afl build
```

Then, the fuzzer can be run on the already provided corpus with
```shell
cargo afl fuzz -i corpus -o findings target/debug/fuzz
```

Once done, move back to the `plutus` directory.
```shell
cd ..
```

## Benchmarks

The benchmarks performed cover all validation benchmarks from `IntersectMBO/plutus/plutus-benchmark`,
which represents a variety of real scripts found on-chain.

The benchmarks are found under the `benches/` directory.
To match the reference implementation, the benchmarks are separated into two groups: `decode` and `full`.
As the names suggest, `decode` only measures the time taken to decode the script, while `full` measures both
the decoding and validation time.

The benchmarks can be run with
```shell
cargo bench
```
A [table](plutus/benches/results.md) is provided that compares the results of the benchmarks with the reference
implementation and another alternative implementation.
